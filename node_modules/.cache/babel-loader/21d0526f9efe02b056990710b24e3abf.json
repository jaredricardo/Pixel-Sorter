{"ast":null,"code":"import _classCallCheck from\"/Users/jaredricardo/Desktop/apps/Pixel-Sorter-Deploy/Pixel-Sorter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jaredricardo/Desktop/apps/Pixel-Sorter-Deploy/Pixel-Sorter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jaredricardo/Desktop/apps/Pixel-Sorter-Deploy/Pixel-Sorter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jaredricardo/Desktop/apps/Pixel-Sorter-Deploy/Pixel-Sorter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from'react';import{test,nativeSort_COL2x,nativeSort_COL,nativeSort}from\"./functions\";import Spinner from'react-bootstrap/Spinner';import{Row,Col,Container,button}from\"react-bootstrap\";export var CanvasApp=/*#__PURE__*/function(_Component){_inherits(CanvasApp,_Component);var _super=_createSuper(CanvasApp);function CanvasApp(props){var _this;_classCallCheck(this,CanvasApp);_this=_super.call(this,props);_this.sortThePixels=function(){if(!_this.state.imageSelected)return alert(\"please load an image\");var algo=_this.state.currentSort;var canvas=_this.canvasRef2.current;var ctx=canvas.getContext(\"2d\");var copyData=ctx.getImageData(0,0,canvas.width,canvas.height);if(algo==='test'){copyData=test(copyData.data,_this.state.imageHeight,_this.state.imageWidth);}if(algo==='nativeSort_COL_2x'){copyData=nativeSort_COL2x(copyData.data,_this.state.imageHeight,_this.state.imageWidth);}if(algo==='nativeSort_COL'){copyData=nativeSort_COL(copyData.data,_this.state.imageHeight,_this.state.imageWidth);}if(algo==='nativeSort'){copyData=nativeSort(copyData.data,_this.state.imageHeight,_this.state.imageWidth);}ctx.putImageData(copyData,0,0);_this.setState({imageSorted:true});};_this.setSortOption=function(e){_this.setState({currentSort:e.target.value});};_this.imageLoadHandler=function(e){if(e.target.files[0].size>104857600)return alert(\"File size exceeds 100MB\");var canvas1=_this.canvasRef1.current;var ctx=canvas1.getContext(\"2d\");var canvas2=_this.canvasRef2.current;var ctx2=canvas2.getContext(\"2d\");var reader=new FileReader();var img=new Image();reader.onload=function(secondEvent){img.onload=function(){var fileSize=function fileSize(bytes){var mb=(bytes/1000000).toFixed(1)+'MB';var kb=(bytes/1000).toFixed(1)+\"KB\";var digits=bytes.toString().length;return digits>=7?mb:kb;};canvas1.width=img.width;canvas1.height=img.height;canvas2.width=img.width;canvas2.height=img.height;ctx.drawImage(img,0,0);ctx2.drawImage(img,0,0);_this.setState({currentImageSrc:secondEvent.target.result,imageFileSize:fileSize(e.target.files[0].size),imageFileName:e.target.files[0].name,imageHeight:img.height,imageWidth:img.width,imageSelected:true,imageSorted:false});};img.src=secondEvent.target.result;};reader.readAsDataURL(e.target.files[0]);};_this.resetImage=function(){if(!_this.state.imageSelected)return alert('No image selected');if(!_this.state.imageSorted)return alert('Image already reset');var canvas=_this.canvasRef2.current;var ctx=canvas.getContext(\"2d\");var img=new Image();img.onload=function(){canvas.width=img.width;canvas.height=img.height;ctx.drawImage(img,0,0);};img.src=_this.state.currentImageSrc;_this.setState({imageSorted:false});};_this.downloadImage=function(){if(!_this.state.imageSorted)return alert(\"Image must be sorted before downloading\");var link=document.createElement('a');link.download=\"sorted \"+_this.state.imageFileName;link.href=_this.canvasRef2.current.toDataURL();link.click();};_this.imageRef=/*#__PURE__*/React.createRef();_this.canvasRef1=/*#__PURE__*/React.createRef();_this.canvasRef2=/*#__PURE__*/React.createRef();_this.state={currentImageSrc:null,imageFileSize:null,imageFileName:null,imageHeight:null,imageWidth:null,imageSelected:false,imageSorted:false,// imageLoading: false, \ncurrentSort:'test'};return _this;}// drawNewImage = () => {\n//     this.setState({\n//         imageLoading: true\n//     }, this.resetLoading)\n// }\n_createClass(CanvasApp,[{key:\"render\",value:function render(){var maxStyle={maxHeight:'700px',width:'auto'};var trigger={visibility:this.state.imageSelected?'visible':'hidden',textAlign:'center'};return/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"ghost-body\",children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{className:\"p-0\",md:12,lg:6,children:/*#__PURE__*/_jsxs(\"div\",{className:\"top-margin text-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",ref:this.uploadedRef,onChange:this.imageLoadHandler}),/*#__PURE__*/_jsxs(\"select\",{name:\"options\",id:\"sort-options\",onChange:this.setSortOption,children:[/*#__PURE__*/_jsx(\"option\",{value:\"test\",children:\"Test\"}),/*#__PURE__*/_jsx(\"option\",{value:\"nativeSort_COL_2x\",children:\"Columned Native Sort x 2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"nativeSort_COL\",children:\"Columned Native Sort\"}),/*#__PURE__*/_jsx(\"option\",{value:\"nativeSort\",children:\"Native Sort\"})]})]})}),/*#__PURE__*/_jsx(Col,{className:\"p-0\",md:12,lg:6,children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center top-margin\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:this.sortThePixels,children:\"Sort Image\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:this.resetImage,children:\"Reset Image\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:this.downloadImage,children:\"Download\"})]})})]}),/*#__PURE__*/_jsxs(Row,{className:\"justify-content-center\",children:[/*#__PURE__*/_jsxs(Col,{className:\"flex-grow-0\",children:[/*#__PURE__*/_jsx(\"p\",{style:trigger,children:\" Original \"}),/*#__PURE__*/_jsx(\"canvas\",{ref:this.canvasRef1,style:maxStyle})]}),/*#__PURE__*/_jsxs(Col,{className:\"flex-grow-0\",children:[/*#__PURE__*/_jsx(\"p\",{style:trigger,children:\" Sorted \"}),/*#__PURE__*/_jsx(\"canvas\",{ref:this.canvasRef2,style:maxStyle})]})]})]});}}]);return CanvasApp;}(Component);export default CanvasApp;","map":{"version":3,"sources":["/Users/jaredricardo/Desktop/apps/Pixel-Sorter-Deploy/Pixel-Sorter/src/components/CanvasApp.js"],"names":["React","Component","test","nativeSort_COL2x","nativeSort_COL","nativeSort","Spinner","Row","Col","Container","button","CanvasApp","props","sortThePixels","state","imageSelected","alert","algo","currentSort","canvas","canvasRef2","current","ctx","getContext","copyData","getImageData","width","height","data","imageHeight","imageWidth","putImageData","setState","imageSorted","setSortOption","e","target","value","imageLoadHandler","files","size","canvas1","canvasRef1","canvas2","ctx2","reader","FileReader","img","Image","onload","secondEvent","fileSize","bytes","mb","toFixed","kb","digits","toString","length","drawImage","currentImageSrc","result","imageFileSize","imageFileName","name","src","readAsDataURL","resetImage","downloadImage","link","document","createElement","download","href","toDataURL","click","imageRef","createRef","maxStyle","maxHeight","trigger","visibility","textAlign","uploadedRef"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { test, nativeSort_COL2x, nativeSort_COL, nativeSort } from \"./functions\"\nimport Spinner from 'react-bootstrap/Spinner';\nimport { Row, Col, Container, button } from \"react-bootstrap\"\n\n\n\nexport class CanvasApp extends Component {\n    constructor(props) {\n        super(props)\n        this.imageRef = React.createRef()\n        this.canvasRef1 = React.createRef()\n        this.canvasRef2 = React.createRef()\n        this.state = {\n            currentImageSrc: null,\n            imageFileSize: null,\n            imageFileName: null,\n            imageHeight: null,\n            imageWidth: null,\n            imageSelected: false,\n            imageSorted: false,\n            // imageLoading: false, \n            currentSort: 'test'\n        }\n    }\n\n      \n    // drawNewImage = () => {\n    //     this.setState({\n    //         imageLoading: true\n    //     }, this.resetLoading)\n    // }\n\n    sortThePixels = () => {\n\n        if(!this.state.imageSelected) return alert(\"please load an image\")\n\n        const algo = this.state.currentSort\n        const canvas = this.canvasRef2.current\n        const ctx = canvas.getContext(\"2d\")\n        let copyData = ctx.getImageData(0,0, canvas.width, canvas.height)\n\n        if(algo === 'test') {\n            copyData = test(copyData.data, this.state.imageHeight, this.state.imageWidth)\n        } \n        if(algo === 'nativeSort_COL_2x') {\n            copyData = nativeSort_COL2x(copyData.data, this.state.imageHeight, this.state.imageWidth)\n        } \n        if(algo === 'nativeSort_COL') {\n            copyData = nativeSort_COL(copyData.data, this.state.imageHeight, this.state.imageWidth)\n        } \n        if(algo === 'nativeSort') {\n            copyData = nativeSort(copyData.data, this.state.imageHeight, this.state.imageWidth)\n        } \n        ctx.putImageData(copyData,0 ,0)\n\n        this.setState({\n            imageSorted: true\n        })\n    }\n\n\n    setSortOption = (e) => {\n        this.setState({\n            currentSort: e.target.value,\n        })\n    }\n\n    imageLoadHandler = (e) => {\n\n        if(e.target.files[0].size > 104857600) return alert(\"File size exceeds 100MB\") \n\n        const canvas1 = this.canvasRef1.current\n        const ctx = canvas1.getContext(\"2d\")\n        \n        const canvas2 = this.canvasRef2.current\n        const ctx2 = canvas2.getContext(\"2d\")\n\n        const reader = new FileReader()\n        const img = new Image()\n\n        reader.onload = (secondEvent) => {\n           \n            img.onload = () => {\n                const fileSize = (bytes) => {\n                    const mb = (bytes / 1000000).toFixed(1) + 'MB'\n                    const kb = (bytes / 1000).toFixed(1) + \"KB\"\n                    const digits = bytes.toString().length \n                    return digits >= 7 ? mb : kb \n                }\n\n                canvas1.width = img.width\n                canvas1.height = img.height\n\n                canvas2.width = img.width\n                canvas2.height = img.height\n\n                ctx.drawImage(img,0,0)\n                ctx2.drawImage(img,0,0)\n\n                this.setState({\n                        currentImageSrc: secondEvent.target.result,\n                        imageFileSize: fileSize(e.target.files[0].size),\n                        imageFileName: e.target.files[0].name,\n                        imageHeight: img.height,\n                        imageWidth: img.width,\n                        imageSelected: true,\n                        imageSorted: false\n                    })\n                }\n            img.src = secondEvent.target.result;\n        }\n        reader.readAsDataURL(e.target.files[0])\n    }\n\n    resetImage = () => {\n        if(!this.state.imageSelected) return alert('No image selected')\n        if(!this.state.imageSorted) return alert('Image already reset')\n        const canvas = this.canvasRef2.current\n        const ctx = canvas.getContext(\"2d\")\n        const img = new Image()\n\n        img.onload = () => {\n            canvas.width = img.width\n            canvas.height = img.height\n            ctx.drawImage(img,0,0)   \n        }\n        img.src = this.state.currentImageSrc\n        this.setState({\n            imageSorted: false\n        })\n    }\n\n    downloadImage = () => {\n        if(!this.state.imageSorted) return alert(\"Image must be sorted before downloading\")\n        const link = document.createElement('a')\n        link.download = \"sorted \" + this.state.imageFileName \n        link.href = this.canvasRef2.current.toDataURL()\n        link.click()\n    }\n\n    render() {\n        \n        const maxStyle = {\n            maxHeight: '700px',\n            width: 'auto' \n        }\n\n        const trigger = {\n            visibility: (this.state.imageSelected) ? 'visible' : 'hidden',\n            textAlign: 'center'\n            \n        }\n\n        return (\n            <Container fluid className=\"ghost-body\"> \n                <Row> \n                    <Col className=\"p-0\" md={12} lg={6}> \n                        <div className=\"top-margin text-center\">\n                            <input type=\"file\" accept=\"image/*\" ref={this.uploadedRef} onChange={this.imageLoadHandler} />\n\n                            <select name=\"options\" id=\"sort-options\" onChange={this.setSortOption}>\n                                <option value=\"test\">Test</option>\n                                <option value=\"nativeSort_COL_2x\">Columned Native Sort x 2</option>\n                                <option value=\"nativeSort_COL\">Columned Native Sort</option>\n                                <option value=\"nativeSort\">Native Sort</option>\n                            </select>\n                        </div> \n                    </Col>\n                    <Col className=\"p-0\" md={12} lg={6}>\n                        <div className=\"text-center top-margin\">\n                            <button className=\"btn btn-primary\" onClick={this.sortThePixels}>\n                                Sort Image\n                                {/* {this.checkLoading()} */}\n                            </button>\n\n                            <button className=\"btn btn-primary\" onClick={this.resetImage}>\n                                Reset Image\n                            </button>\n\n                            <button className=\"btn btn-primary\" onClick={this.downloadImage}> \n                                Download \n                            </button>\n                        </div>                       \n                    </Col>   \n                </Row>\n\n                <Row className=\"justify-content-center\">\n\n                    <Col className=\"flex-grow-0\">\n                        <p style={trigger}> Original </p>\n                        <canvas ref={this.canvasRef1} style={maxStyle}/>\n                    </Col>\n\n                    <Col className=\"flex-grow-0\">\n                        <p style={trigger}> Sorted </p>\n                        <canvas ref={this.canvasRef2} style={maxStyle}/>\n                    </Col>\n\n                </Row>           \n            </Container>\n        )\n    }\n}\n\n\nexport default CanvasApp\n"]},"metadata":{},"sourceType":"module"}